<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Readme - cwserver</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" />
    <style type="text/css">
        code {
            color: #c7254e;
            background-color: #f9f2f4;
            border-radius: 4px;
        }

        pre code {
            padding: 0;
            font-size: inherit;
            color: inherit;
            white-space: pre-wrap;
            background-color: transparent;
            border-radius: 0;
        }

        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }

            .markdown-body .highlight pre, .markdown-body pre {
                padding: 1px !important;
            }

        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <article class="markdown-body entry-content container-lg" itemprop="text">
        <p><a href="/readme" rel="nofollow"><img src="https://camo.githubusercontent.com/2d74d1ced4b061d24dbe491ba78c6a79227ec47f/68747470733a2f2f692e696d6775722e636f6d2f6550513332786f2e706e67" alt="Cwserver Logo" data-canonical-src="https://i.imgur.com/ePQ32xo.png" style="max-width:100%;"></a></p>
        <p>
            <a target="_blank" href="https://travis-ci.org/github/safeonlineworld/cwserver" rel="nofollow"><img src="https://camo.githubusercontent.com/806ff138364210f928adfa7540c9437c8e0421e7/68747470733a2f2f6170692e7472617669732d63692e6f72672f736166656f6e6c696e65776f726c642f63777365727665722e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://api.travis-ci.org/safeonlineworld/cwserver.svg?branch=master" style="max-width:100%;"></a>
            <a target="_blank" href="https://badge.fury.io/js/cwserver" rel="nofollow"><img src="https://camo.githubusercontent.com/a163e8dde56818e2b606b75dd6fccf2feed6e5cd/68747470733a2f2f62616467652e667572792e696f2f6a732f63777365727665722e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/cwserver.svg" style="max-width:100%;"></a>
            <a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/b2f82cbc11aa5af636f26e2bee184cb38bb43158/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f64742f6377736572766572"><img src="https://camo.githubusercontent.com/b2f82cbc11aa5af636f26e2bee184cb38bb43158/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f64742f6377736572766572" alt="Downloads" data-canonical-src="https://img.shields.io/npm/dt/cwserver" style="max-width:100%;"></a>
            <a target="_blank" href="https://lgtm.com/projects/g/safeonlineworld/cwserver/context:javascript" rel="nofollow"><img src="https://camo.githubusercontent.com/c553674fe7d2e790cd1e58d6af1710e02ef0b280/68747470733a2f2f696d672e736869656c64732e696f2f6c67746d2f67726164652f6a6176617363726970742f672f736166656f6e6c696e65776f726c642f63777365727665722e7376673f6c6f676f3d6c67746d266c6f676f57696474683d3138" alt="Language grade: JavaScript" data-canonical-src="https://img.shields.io/lgtm/grade/javascript/g/safeonlineworld/cwserver.svg?logo=lgtm&amp;logoWidth=18" style="max-width:100%;"></a>
            <a target="_blank" href="https://coveralls.io/github/safeonlineworld/cwserver?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/5fae75503d8eab4a78e951feecae6e2f15de1f4a/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f736166656f6e6c696e65776f726c642f63777365727665722f62616467652e7376673f6272616e63683d6d617374657226763d33" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/safeonlineworld/cwserver/badge.svg?branch=master&amp;v=3" style="max-width:100%;"></a>
            <a target="_blank" href="https://david-dm.org/safeonlineworld/cwserver" rel="nofollow"><img src="https://camo.githubusercontent.com/385de7fb234d9378e2e6b533a3dd11ce3a402e09/68747470733a2f2f64617669642d646d2e6f72672f736166656f6e6c696e65776f726c642f63777365727665722e737667" alt="Dependency Status" data-canonical-src="https://david-dm.org/safeonlineworld/cwserver.svg" style="max-width:100%;"></a>
            <a target="_blank" href="https://david-dm.org/safeonlineworld/cwserver#info=devDependencies" rel="nofollow"><img src="https://camo.githubusercontent.com/572abf488a1fe9443bfc7b1d7eefa0cb97382c96/68747470733a2f2f64617669642d646d2e6f72672f736166656f6e6c696e65776f726c642f63777365727665722f6465762d7374617475732e737667" alt="devDependency Status" data-canonical-src="https://david-dm.org/safeonlineworld/cwserver/dev-status.svg" style="max-width:100%;"></a>
        </p>
        <p>
            Install <code>cwserver</code> by this command <code>npm i cwserver</code><br>
            Create <code>createProjectTemplate.js</code> as following
        </p>
        <pre><code>const { createProjectTemplate } = require( 'cwserver' );
        createProjectTemplate( {
            appRoot: __dirname,
            projectRoot: "www" /** Your project root folder name*/,
            allExample: false
        } );
        </code></pre>
        <p>
            Then run this commmand <code>node createProjectTemplate</code><br>
            It will create default project template for <code>cwserver</code> in your application root.<br>
            Now your appRoot look like this
        </p>
        <pre><code>appRoot 
        ├─┬ wwww ( projectRoot )
        │ └─┬ config
        │   ├ lib
        │   ├ template (this contains master template file)
        │   ├ web (this contains temp and cache files)
        │   └ index.html
        ├─ node_modules
        ├─ server.js
        ├─ package.json
        └─ README.md
        </code></pre>
        <p>After, run this command <code>node server www /**your project root*/</code><br></p>
        <h1><a id="user-content-how-to-setup-router-" class="anchor" aria-hidden="true" href="#how-to-setup-router-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>How to setup router ?</h1>
        <pre><code>global.sow.server.on( "register-view", ( app, controller, server ) =&gt; {
            controller
                .any( '/test-any/*', ( ctx, match ) =&gt; {
                    return ctx.res.json( { reqPath: ctx.path, servedFrom: "/test-any/*", q: match } );
                } )
                .get( '/task/:id/*', ( ctx, match ) =&gt; {
                    return ctx.res.json( { reqPath: ctx.path, servedFrom: "/task/:id/*", q: match } );
                } )
                .get( '/dist/*', ( ctx, match ) =&gt; {
                    return ctx.res.json( { reqPath: ctx.path, servedFrom: "/dist/*", q: match } );
                } )
                .get( '/user/:id/settings', ( ctx, match ) =&gt; {
                    return ctx.res.json( { reqPath: ctx.path, servedFrom: "/user/:id/settings", q: match } );
                } );
        } );
        </code></pre>
        <h1><a id="user-content-how-to-add-virtual-directory-" class="anchor" aria-hidden="true" href="#how-to-add-virtual-directory-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>How to add Virtual Directory ?</h1>
        <pre><code>global.sow.server.on( "register-view", ( app, controller, server ) =&gt; {
            const vDir = path.join( path.resolve( server.getRoot(), '..' ), "/project_template/test/" );
            server.addVirtualDir( "/vtest", vDir, ( ctx ) =&gt; {
                return mimeHandler.render( ctx, vDir, true );
            } );
            server.addVirtualDir( "/test-virtual", vDir );
            server.addVirtualDir( "/vtest/virtual/", vDir );
        } );
        </code></pre>
        <h1><a id="user-content-handle-post-data" class="anchor" aria-hidden="true" href="#handle-post-data"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>Handle post data</h1>
        <pre><code>global.sow.server.on( "register-view", ( app, controller, server ) =&gt; {
            const downloadDir = server.mapPath( "/upload/data/" );
            if ( !fs.existsSync( downloadDir ) ) {
                Util.mkdirSync( server.mapPath( "/" ), "/upload/data/" );
            }
            const tempDir = server.mapPath( "/upload/temp/" );
            controller.post( '/post-async', async ( ctx ) =&gt; {
                const parser = new PayloadParser( ctx.req, tempDir );
                await parser.readDataAsync();
                if ( parser.isUrlEncoded() || parser.isAppJson() ) {
                    ctx.res.writeHead( 200, { 'Content-Type': 'application/json' } );
                    return ctx.res.end( JSON.stringify( parser.getJson() ) ), ctx.next( 200 ), void 0;
                }
                parser.saveAs( downloadDir );
                return ctx.res.asHTML( 200 ).end( "&lt;h1&gt;success&lt;/h1&gt;" );
                // or
                /*const data = [];
                parser.getFiles( ( file ) =&gt; {
                    data.push( {
                        content_type: file.getContentType(),
                        name: file.getName(),
                        file_name: file.getFileName(),
                        content_disposition: file.getContentDisposition(),
                        file_size: file.getFileSize(),
                        temp_path: file.getTempPath()
                    } );
                    file.saveAs( `${downloadDir}/${Util.guid()}_${file.getFileName()}` );
                } );
                return ctx.res.json( data );*/
            } )
        } );
        </code></pre>
        <p><a target="_blank" href="https://github.com/safeonlineworld/cwserver/blob/master/test/test-view.ts">See more test here</a><br></p>
        <h1><a id="user-content-template-engine" class="anchor" aria-hidden="true" href="#template-engine"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>Template Engine<br></h1>
        <p>
            Template can run <code>config.defaultExt</code> file extension or <code>ctx.res.render( ctx, to_file_path )</code> <br>
            Example of server-side script in <code>config.defaultExt</code> or <code>.htm|.html</code><br>
        </p>
        <pre><code>ctx.res.render( ctx, server.mapPath( `/index${server.config.defaultExt || ".html"}` ) );
        </code></pre>
        <p>Code block:</p>
        <pre><code>{%
            if( !ctx.session.isAuthenticated ){
               return ctx.next( 401, true );
            } else {
               ctx.write( JSON.stringify( ctx.session ) );
            }
        %}
        </code></pre>
        <p>Response write: <code>{= myVar =}</code> or <code>ctx.write(myVar)</code><br></p>
        <pre><code>{%
            const result = await ctx.server.db.pgsql.executeIoAsync( "my_shcema.__get_dataset", JSON.stringify( {
                login_id: ctx.req.session.loginId
            } ), JSON.stringify( {
                trade_date: "2020-02-03"
            } ) );
        %}
        {% if ( result.ret_val &lt; 0) { %}
            &lt;span style="color:red"&gt;No Data Found...&lt;/span&gt;
        {% } else { %}
        &lt;table style="width:100%"&gt;
           &lt;thead&gt;
              &lt;tr&gt;
                 &lt;th&gt;Firstname&lt;/th&gt;
                 &lt;th&gt;Lastname&lt;/th&gt;
                 &lt;th&gt;Age&lt;/th&gt;
              &lt;/tr&gt;
           &lt;/thead&gt;
           &lt;tbody&gt;
           {% for( const row of result.ret_data_table ){ %}
                &lt;tr&gt;
                    &lt;td&gt;{= row.first_name =}&lt;/td&gt;
                    &lt;td&gt;{= row.last_name =}&lt;/td&gt;
                    &lt;td&gt;{= row.age_name =}&lt;/td&gt;
                &lt;/tr&gt;
           {% } %}
           &lt;/tbody&gt;
        &lt;/table&gt;
        {% } %}
        </code></pre>
        <h1><a id="user-content-nested-master-template" class="anchor" aria-hidden="true" href="#nested-master-template"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>Nested Master Template<br></h1>
        <p>
            <code>#extends</code> keyword define my master template<br>
            You can add multiple file by <code>#attach</code> keyword
        </p>
        <pre><code>www
        ├─┬ template
        │ └─┬ master.html 
        │   ├ footer.html
        │   ├ header.html
        │   └ readme.html
        ├─ index.html
        
        index.html  ==&gt; #extends /template/readme.html
        ==&gt; index.html impliment placeholder id of readme.html (parent master)
        -------------------------------------------
        #extends /template/readme.html
        &lt;impl-placeholder id="container"&gt;
            container here
        &lt;/impl-placeholder&gt;
        -------------------------------------------
        readme.html ==&gt; #extends /template/master.html (parent master)
        ==&gt; readme.html like as master template and its contains own placeholder and impliment placeholder id of master.html
        -------------------------------------------
        #extends /template/master.html
        &lt;impl-placeholder id="body"&gt;
            &lt;!--Here create new placeholder--&gt;
            &lt;placeholder id="container"&gt;
            &lt;/placeholder&gt;
        &lt;/impl-placeholder&gt;
        &lt;impl-placeholder id="header"&gt;
            #attach /template/header.html
        &lt;/impl-placeholder&gt;
        -------------------------------------------
        master.html ==&gt; root master template
        --------------------------------------------
        &lt;!DOCTYPE html&gt;
        &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
        &lt;placeholder id="header"&gt;
        &lt;/placeholder&gt;
        &lt;body&gt;
            &lt;placeholder id="body"&gt;
            &lt;/placeholder&gt;
            #attach /template/footer.html
        &lt;/body&gt;
        &lt;/html&gt;
        --------------------------------------------
        </code></pre>
        <p>see more about template /dist/project_template/www <br><br></p>
        <h1><a id="user-content-serverjs" class="anchor" aria-hidden="true" href="#serverjs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.775 3.275C7.64252 3.41717 7.57039 3.60522 7.57382 3.79952C7.57725 3.99382 7.65596 4.1792 7.79337 4.31662C7.93079 4.45403 8.11617 4.53274 8.31047 4.53617C8.50477 4.5396 8.69282 4.46748 8.835 4.335L10.085 3.085C10.2708 2.89918 10.4914 2.75177 10.7342 2.65121C10.977 2.55064 11.2372 2.49888 11.5 2.49888C11.7628 2.49888 12.023 2.55064 12.2658 2.65121C12.5086 2.75177 12.7292 2.89918 12.915 3.085C13.1008 3.27082 13.2482 3.49142 13.3488 3.7342C13.4493 3.97699 13.5011 4.23721 13.5011 4.5C13.5011 4.76279 13.4493 5.023 13.3488 5.26579C13.2482 5.50857 13.1008 5.72917 12.915 5.915L10.415 8.415C10.2292 8.60095 10.0087 8.74847 9.76588 8.84911C9.52308 8.94976 9.26283 9.00157 9 9.00157C8.73716 9.00157 8.47691 8.94976 8.23411 8.84911C7.99132 8.74847 7.77074 8.60095 7.585 8.415C7.44282 8.28252 7.25477 8.21039 7.06047 8.21382C6.86617 8.21725 6.68079 8.29596 6.54337 8.43337C6.40596 8.57079 6.32725 8.75617 6.32382 8.95047C6.32039 9.14477 6.39252 9.33282 6.525 9.475C6.85001 9.80004 7.23586 10.0579 7.66052 10.2338C8.08518 10.4097 8.54034 10.5002 9 10.5002C9.45965 10.5002 9.91481 10.4097 10.3395 10.2338C10.7641 10.0579 11.15 9.80004 11.475 9.475L13.975 6.975C14.6314 6.31858 15.0002 5.4283 15.0002 4.5C15.0002 3.57169 14.6314 2.68141 13.975 2.025C13.3186 1.36858 12.4283 0.999817 11.5 0.999817C10.5717 0.999817 9.68141 1.36858 9.02499 2.025L7.775 3.275ZM3.085 12.915C2.89904 12.7292 2.75152 12.5087 2.65088 12.2659C2.55023 12.0231 2.49842 11.7628 2.49842 11.5C2.49842 11.2372 2.55023 10.9769 2.65088 10.7341C2.75152 10.4913 2.89904 10.2707 3.085 10.085L5.585 7.585C5.77074 7.39904 5.99132 7.25152 6.23411 7.15088C6.47691 7.05023 6.73716 6.99842 7 6.99842C7.26283 6.99842 7.52308 7.05023 7.76588 7.15088C8.00867 7.25152 8.22925 7.39904 8.415 7.585C8.55717 7.71748 8.74522 7.7896 8.93952 7.78617C9.13382 7.78274 9.3192 7.70403 9.45662 7.56662C9.59403 7.4292 9.67274 7.24382 9.67617 7.04952C9.6796 6.85522 9.60748 6.66717 9.475 6.525C9.14999 6.19995 8.76413 5.94211 8.33947 5.7662C7.91481 5.59029 7.45965 5.49974 7 5.49974C6.54034 5.49974 6.08518 5.59029 5.66052 5.7662C5.23586 5.94211 4.85001 6.19995 4.525 6.525L2.025 9.02499C1.36858 9.68141 0.999817 10.5717 0.999817 11.5C0.999817 12.4283 1.36858 13.3186 2.025 13.975C2.68141 14.6314 3.57169 15.0002 4.5 15.0002C5.4283 15.0002 6.31858 14.6314 6.975 13.975L8.225 12.725C8.35748 12.5828 8.4296 12.3948 8.42617 12.2005C8.42274 12.0062 8.34403 11.8208 8.20662 11.6834C8.0692 11.546 7.88382 11.4672 7.68952 11.4638C7.49522 11.4604 7.30717 11.5325 7.165 11.665L5.915 12.915C5.72925 13.1009 5.50867 13.2485 5.26588 13.3491C5.02308 13.4498 4.76283 13.5016 4.5 13.5016C4.23716 13.5016 3.97691 13.4498 3.73411 13.3491C3.49132 13.2485 3.27074 13.1009 3.085 12.915Z"></path></svg></a>server.js</h1>
        <p>You may create server.js file by you:</p>
        <pre><code>const { ConsoleColor, initilizeServer } = require( 'cwserver' );
        let wwwName = void 0;
        if ( process.argv.length &gt; 2 ) {
            wwwName = process.argv[2];
        } else {
            if ( process.env.APP_POOL_ID ) {
                wwwName = process.env[process.env.APP_POOL_ID];
            }
        }
        const server = initilizeServer( __dirname, wwwName );
        const app = server.init();
        process.on( 'exit', () =&gt; {
            console.log( "Exited..." );
        } );
        process.on( 'SIGINT', () =&gt; {
            server.log.error( "Caught interrupt signal" );
            server.log.error( "Application Exited..." );
            server.log.reset(); server.log.dispose();
            setTimeout( () =&gt; {
                process.exit( 0 );
            }, 200 );
        } );
        app.listen( server.port, () =&gt; server.log.write( `
            [+] Maintance      : https://www.safeonline.world
            [+] Server         : http://localhost:${server.port}
            [+] Socket         : ws://localhost:${server.port}${server.socketPath}
            [~] Running Server...
        `, ConsoleColor.FgMagenta ) );
        </code></pre>
        <p>
            Read more about <a href="https://github.com/safeonlineworld/cwserver/blob/master/schema.json">app.config.json</a><br>
            run <code>node server your_app_dir_name</code> or <code>npm start your_app_dir_name</code>
        </p>
    </article>
    <script type="text/javascript">
        function docReady( fn ) {
            // see if DOM is already available
            if ( document.readyState === "complete" || document.readyState === "interactive" ) {
                // call on next available tick
                setTimeout( fn, 1 );
            } else {
                document.addEventListener( "DOMContentLoaded", fn );
            }
        };
        docReady( function () {
            document.querySelectorAll( 'a[href^="#"]' ).forEach( function ( item ) {
                item.addEventListener( 'click', function ( e ) {
                    let hashval = item.getAttribute( 'href' );
                    item.scrollIntoView( {
                        behavior: 'smooth',
                        block: 'start'
                    } );
                    history.pushState( null, null, hashval );
                    e.preventDefault();
                } );
            } );
            if ( document.location.hash ) {
                setTimeout( () => {
                    ( function ( elem ) {
                        if ( !elem ) return;
                        elem.click();
                    }( document.querySelector( `[href="${document.location.hash}"]` ) ) );
                }, 100 );
            }
        } );
    </script>
</body>
</html>